!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rxjs")):"function"==typeof define&&define.amd?define(["rxjs"],e):"object"==typeof exports?exports.emporium=e(require("rxjs")):t.emporium=e(t.rxjs)}(window,(function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";r.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var i="injectionTokens";function o(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],r=Reflect.getOwnMetadata(i,t)||{};return Object.keys(r).forEach((function(t){e[+t]=r[t]})),e}function u(t){return function(e,r,n){var o=Reflect.getOwnMetadata(i,e)||{};o[n]=t,Reflect.defineMetadata(i,o,e)}}function s(t){return!!t.useClass}function a(t){return!!t.useFactory}function c(t){return"string"==typeof t||"symbol"==typeof t}function f(t){return"object"==typeof t&&"token"in t&&"multiple"in t}function l(t){return!!t.useToken}function h(t){return null!=t.useValue}var p=function(){function t(){this._registryMap=new Map}return t.prototype.getAll=function(t){return this.ensure(t),this._registryMap.get(t)},t.prototype.get=function(t){this.ensure(t);var e=this._registryMap.get(t);return e[e.length-1]||null},t.prototype.set=function(t,e){this.ensure(t),this._registryMap.get(t).push(e)},t.prototype.has=function(t){return this.ensure(t),this._registryMap.get(t).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(t){this._registryMap.has(t)||this._registryMap.set(t,[])},t}(),d=new Map,y=new(function(){function t(t){this.parent=t,this._registry=new p}return t.prototype.register=function(t,e,r){if(void 0===r&&(r={singleton:!1}),r.singleton&&(h(e)||a(e)))throw"Cannot use {singleton: true} with ValueProviders or FactoryProviders";return this._registry.set(t,{provider:e,options:r}),this},t.prototype.registerType=function(t,e){return c(e)?this.register(t,{useToken:e}):this.register(t,{useClass:e})},t.prototype.registerInstance=function(t,e){return this.register(t,{useValue:e})},t.prototype.registerSingleton=function(t,e){if(c(t)){if(c(e))return this.register(t,{useToken:e},{singleton:!0});if(e)return this.register(t,{useClass:e},{singleton:!0});throw'Cannot register a type name as a singleton without a "to" token'}var r=t;return e&&!c(e)&&(r=e),this.register(t,{useClass:r},{singleton:!0})},t.prototype.resolve=function(t){var e=this.getRegistration(t);if(!e&&c(t))throw"Attempted to resolve unregistered dependency token: "+t.toString();return e?this.resolveRegistration(e):this.construct(t)},t.prototype.resolveRegistration=function(t){return h(t.provider)?t.provider.useValue:l(t.provider)?t.options.singleton?t.instance||(t.instance=this.resolve(t.provider.useToken)):this.resolve(t.provider.useToken):s(t.provider)?t.options.singleton?t.instance||(t.instance=this.construct(t.provider.useClass)):this.construct(t.provider.useClass):a(t.provider)?t.provider.useFactory(this):this.construct(t.provider)},t.prototype.resolveAll=function(t){var e=this,r=this.getAllRegistrations(t);if(!r&&c(t))throw"Attempted to resolve unregistered dependency token: "+t.toString();return r?r.map((function(t){return e.resolveRegistration(t)})):[this.construct(t)]},t.prototype.isRegistered=function(t){return this._registry.has(t)},t.prototype.reset=function(){this._registry.clear()},t.prototype.createChildContainer=function(){return new t(this)},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this._registry.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this._registry.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t){var e=this;if(0===t.length)return new t;var r=d.get(t);if(!r||0===r.length)throw"TypeInfo not known for "+t;var n=r.map((function(t){return f(t)?t.multiple?e.resolveAll(t.token):e.resolve(t.token):e.resolve(t)}));return new(t.bind.apply(t,[void 0].concat(n)))},t}());var v=function(){return function(t){var e=o(t);return function(r){function i(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.apply(this,n.concat(e.slice(n.length).map((function(e,r){try{return f(e)?e.multiple?y.resolveAll(e.token):y.resolve(e.token):y.resolve(e)}catch(e){var i=r+n.length,o=(t.toString().match(/constructor\(([\w, ]+)\)/)||[])[1],u=void 0===o?null:o;throw"Cannot inject the dependency "+(u?u.split(",")[i]:"#"+i)+" of "+t.name+" constructor. "+e}}))))||this}return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(i,r),i}(t)}};var m=function(t){return u(t)};var g=function(){return function(t){d.set(t,o(t))}};var w=function(t){return void 0===t&&(t=[]),function(e){return t.forEach((function(t){var e=t.token,r=t.options,n=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(t,["token","options"]);return y.register(e,n,r)})),e}};var b=function(){return function(t){g()(t),y.registerSingleton(t)}};var _=function(t){return u({token:t,multiple:!0})};function S(t){var e;return function(r){return null==e&&(e=t(r)),e}}function j(t,e,r,n){var i,o;return void 0===n&&(n=!0),function(u){var s=t(u);return n&&o===s||(i=(o=s)?u.resolve(e):u.resolve(r)),i}}if(r.d(e,"autoInjectable",(function(){return v})),r.d(e,"inject",(function(){return m})),r.d(e,"injectable",(function(){return g})),r.d(e,"registry",(function(){return w})),r.d(e,"singleton",(function(){return b})),r.d(e,"injectAll",(function(){return _})),r.d(e,"instanceCachingFactory",(function(){return S})),r.d(e,"predicateAwareClassFactory",(function(){return j})),r.d(e,"isClassProvider",(function(){return s})),r.d(e,"isFactoryProvider",(function(){return a})),r.d(e,"isNormalToken",(function(){return c})),r.d(e,"isTokenProvider",(function(){return l})),r.d(e,"isValueProvider",(function(){return h})),r.d(e,"container",(function(){return y})),"undefined"==typeof Reflect||!Reflect.getMetadata)throw"tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point."},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(2),o=r(7);e.Emporium=o.Emporium;e.initEmporium=function(){n.container.register("IRepository",{useClass:i.HttpBin})}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,u=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,r,u):i(e,r))||u);return o>3&&u&&Object.defineProperty(e,r,u),u},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),u=r(3),s=r(4),a=i(r(5)),c=function(){function t(){var t=this;this._store=new u.Subject,this._queue=s.queue((function(e,r){t._store.next(e),r()}),2),this.stream=function(){return Promise.resolve(t._store)}}return t.prototype.save=function(t){return this._queue.push(t,(function(){return a.default.post("https://httpbin.org/post")})),Promise.resolve(t)},t.prototype.find=function(){return Promise.resolve([])},t=n([o.injectable(),o.singleton()],t)}();e.HttpBin=c},function(e,r){e.exports=t},function(t,e,r){"use strict";function n(t,...e){return(...r)=>t(...e,...r)}function i(t){return function(...e){var r=e.pop();return t.call(this,e,r)}}r.r(e),r.d(e,"apply",(function(){return n})),r.d(e,"applyEach",(function(){return L})),r.d(e,"applyEachSeries",(function(){return T})),r.d(e,"asyncify",(function(){return f})),r.d(e,"auto",(function(){return U})),r.d(e,"autoInject",(function(){return V})),r.d(e,"cargo",(function(){return W})),r.d(e,"cargoQueue",(function(){return $})),r.d(e,"compose",(function(){return K})),r.d(e,"concat",(function(){return Z})),r.d(e,"concatLimit",(function(){return Y})),r.d(e,"concatSeries",(function(){return tt})),r.d(e,"constant",(function(){return et})),r.d(e,"detect",(function(){return nt})),r.d(e,"detectLimit",(function(){return it})),r.d(e,"detectSeries",(function(){return ot})),r.d(e,"dir",(function(){return st})),r.d(e,"doUntil",(function(){return ct})),r.d(e,"doWhilst",(function(){return at})),r.d(e,"each",(function(){return lt})),r.d(e,"eachLimit",(function(){return ht})),r.d(e,"eachOf",(function(){return A})),r.d(e,"eachOfLimit",(function(){return k})),r.d(e,"eachOfSeries",(function(){return P})),r.d(e,"eachSeries",(function(){return pt})),r.d(e,"ensureAsync",(function(){return dt})),r.d(e,"every",(function(){return yt})),r.d(e,"everyLimit",(function(){return vt})),r.d(e,"everySeries",(function(){return mt})),r.d(e,"filter",(function(){return _t})),r.d(e,"filterLimit",(function(){return St})),r.d(e,"filterSeries",(function(){return jt})),r.d(e,"forever",(function(){return Et})),r.d(e,"groupBy",(function(){return Rt})),r.d(e,"groupByLimit",(function(){return kt})),r.d(e,"groupBySeries",(function(){return Ot})),r.d(e,"log",(function(){return At})),r.d(e,"map",(function(){return x})),r.d(e,"mapLimit",(function(){return X})),r.d(e,"mapSeries",(function(){return C})),r.d(e,"mapValues",(function(){return Lt})),r.d(e,"mapValuesLimit",(function(){return xt})),r.d(e,"mapValuesSeries",(function(){return Pt})),r.d(e,"memoize",(function(){return Ct})),r.d(e,"nextTick",(function(){return Tt})),r.d(e,"parallel",(function(){return It})),r.d(e,"parallelLimit",(function(){return Ut})),r.d(e,"priorityQueue",(function(){return Nt})),r.d(e,"queue",(function(){return Ft})),r.d(e,"race",(function(){return Vt})),r.d(e,"reduce",(function(){return G})),r.d(e,"reduceRight",(function(){return Ht})),r.d(e,"reflect",(function(){return zt})),r.d(e,"reflectAll",(function(){return Qt})),r.d(e,"reject",(function(){return $t})),r.d(e,"rejectLimit",(function(){return Gt})),r.d(e,"rejectSeries",(function(){return Jt})),r.d(e,"retry",(function(){return Zt})),r.d(e,"retryable",(function(){return te})),r.d(e,"seq",(function(){return J})),r.d(e,"series",(function(){return ee})),r.d(e,"setImmediate",(function(){return c})),r.d(e,"some",(function(){return re})),r.d(e,"someLimit",(function(){return ne})),r.d(e,"someSeries",(function(){return ie})),r.d(e,"sortBy",(function(){return oe})),r.d(e,"timeout",(function(){return ue})),r.d(e,"times",(function(){return ae})),r.d(e,"timesLimit",(function(){return se})),r.d(e,"timesSeries",(function(){return ce})),r.d(e,"transform",(function(){return fe})),r.d(e,"tryEach",(function(){return le})),r.d(e,"unmemoize",(function(){return he})),r.d(e,"until",(function(){return de})),r.d(e,"waterfall",(function(){return ye})),r.d(e,"whilst",(function(){return pe})),r.d(e,"all",(function(){return yt})),r.d(e,"allLimit",(function(){return vt})),r.d(e,"allSeries",(function(){return mt})),r.d(e,"any",(function(){return re})),r.d(e,"anyLimit",(function(){return ne})),r.d(e,"anySeries",(function(){return ie})),r.d(e,"find",(function(){return nt})),r.d(e,"findLimit",(function(){return it})),r.d(e,"findSeries",(function(){return ot})),r.d(e,"flatMap",(function(){return Z})),r.d(e,"flatMapLimit",(function(){return Y})),r.d(e,"flatMapSeries",(function(){return tt})),r.d(e,"forEach",(function(){return lt})),r.d(e,"forEachSeries",(function(){return pt})),r.d(e,"forEachLimit",(function(){return ht})),r.d(e,"forEachOf",(function(){return A})),r.d(e,"forEachOfSeries",(function(){return P})),r.d(e,"forEachOfLimit",(function(){return k})),r.d(e,"inject",(function(){return G})),r.d(e,"foldl",(function(){return G})),r.d(e,"foldr",(function(){return Ht})),r.d(e,"select",(function(){return _t})),r.d(e,"selectLimit",(function(){return St})),r.d(e,"selectSeries",(function(){return jt})),r.d(e,"wrapSync",(function(){return f})),r.d(e,"during",(function(){return pe})),r.d(e,"doDuring",(function(){return at}));var o="function"==typeof setImmediate&&setImmediate,u="object"==typeof process&&"function"==typeof process.nextTick;function s(t){setTimeout(t,0)}function a(t){return(e,...r)=>t(()=>e(...r))}var c=a(o?setImmediate:u?process.nextTick:s);function f(t){return p(t)?function(...e){const r=e.pop();return l(t.apply(this,e),r)}:i((function(e,r){var n;try{n=t.apply(this,e)}catch(t){return r(t)}if(n&&"function"==typeof n.then)return l(n,r);r(null,n)}))}function l(t,e){return t.then(t=>{h(e,null,t)},t=>{h(e,t&&t.message?t:new Error(t))})}function h(t,e,r){try{t(e,r)}catch(t){c(t=>{throw t},t)}}function p(t){return"AsyncFunction"===t[Symbol.toStringTag]}function d(t){if("function"!=typeof t)throw new Error("expected a function");return p(t)?f(t):t}function y(t,e=t.length){if(!e)throw new Error("arity is undefined");function r(...r){return"function"==typeof r[e-1]?t.apply(this,r):new Promise((n,i)=>{r[e-1]=(t,...e)=>{if(t)return i(t);n(e.length>1?e:e[0])},t.apply(this,r)})}return Object.defineProperty(r,"name",{value:`awaitable(${t.name})`}),r}function v(t){return function(e,...r){return y((function(n){var i=this;return t(e,(t,e)=>{d(t).apply(i,r.concat(e))},n)}))}}function m(t,e,r,n){e=e||[];var i=[],o=0,u=d(r);return t(e,(t,e,r)=>{var n=o++;u(t,(t,e)=>{i[n]=e,r(t)})},t=>{n(t,i)})}function g(t){return t&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}const w={};function b(t){function e(...e){if(null!==t){var r=t;t=null,r.apply(this,e)}}return Object.assign(e,t),e}function _(t){if(g(t))return function(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}(t);var e,r,n,i,o=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}(t);return o?function(t){var e=-1;return function(){var r=t.next();return r.done?null:(e++,{value:r.value,key:e})}}(o):(r=(e=t)?Object.keys(e):[],n=-1,i=r.length,function(){var t=r[++n];return n<i?{value:e[t],key:t}:null})}function S(t){return function(...e){if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}function j(t,e,r,n){let i=!1,o=!1,u=!1,s=0,a=0;function c(){s>=e||u||i||(u=!0,t.next().then(({value:t,done:e})=>{if(!o&&!i){if(u=!1,e)return i=!0,void(s<=0&&n(null));s++,r(t,a,f),a++,c()}}).catch(l))}function f(t,e){if(s-=1,!o)return t?l(t):!1===t?(i=!0,void(o=!0)):e===w||i&&s<=0?(i=!0,n(null)):void c()}function l(t){o||(u=!1,i=!0,n(t))}c()}var E=t=>(e,r,n)=>{if(n=b(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if(function(t){return"AsyncGenerator"===t[Symbol.toStringTag]}(e))return j(e,t,r,n);if(function(t){return"function"==typeof t[Symbol.asyncIterator]}(e))return j(e[Symbol.asyncIterator](),t,r,n);var i=_(e),o=!1,u=!1,s=0,a=!1;function c(t,e){if(!u)if(s-=1,t)o=!0,n(t);else if(!1===t)o=!0,u=!0;else{if(e===w||o&&s<=0)return o=!0,n(null);a||f()}}function f(){for(a=!0;s<t&&!o;){var e=i();if(null===e)return o=!0,void(s<=0&&n(null));s+=1,r(e.value,e.key,S(c))}a=!1}f()};var k=y((function(t,e,r,n){return E(e)(t,d(r),n)}),4);function R(t,e,r){r=b(r);var n=0,i=0,{length:o}=t,u=!1;function s(t,e){!1===t&&(u=!0),!0!==u&&(t?r(t):++i!==o&&e!==w||r(null))}for(0===o&&r(null);n<o;n++)e(t[n],n,S(s))}function O(t,e,r){return k(t,1/0,e,r)}var A=y((function(t,e,r){return(g(t)?R:O)(t,d(e),r)}),3);var x=y((function(t,e,r){return m(A,t,e,r)}),3),L=v(x);var P=y((function(t,e,r){return k(t,1,e,r)}),3);var C=y((function(t,e,r){return m(P,t,e,r)}),3),T=v(C);const M=Symbol("promiseCallback");function I(){let t,e;function r(r,...n){if(r)return e(r);t(n.length>1?n:n[0])}return r[M]=new Promise((r,n)=>{t=r,e=n}),r}function U(t,e,r){"number"!=typeof e&&(r=e,e=null),r=b(r||I());var n=Object.keys(t).length;if(!n)return r(null);e||(e=n);var i={},o=0,u=!1,s=!1,a=Object.create(null),c=[],f=[],l={};function h(t,e){c.push(()=>(function(t,e){if(s)return;var n=S((e,...n)=>{if(o--,!1!==e)if(n.length<2&&([n]=n),e){var c={};if(Object.keys(i).forEach(t=>{c[t]=i[t]}),c[t]=n,s=!0,a=Object.create(null),u)return;r(e,c)}else i[t]=n,function(t){(a[t]||[]).forEach(t=>t()),p()}(t);else u=!0});o++;var c=d(e[e.length-1]);e.length>1?c(i,n):c(n)})(t,e))}function p(){if(!u){if(0===c.length&&0===o)return r(null,i);for(;c.length&&o<e;){c.shift()()}}}function y(e){var r=[];return Object.keys(t).forEach(n=>{const i=t[n];Array.isArray(i)&&i.indexOf(e)>=0&&r.push(n)}),r}return Object.keys(t).forEach(e=>{var r=t[e];if(!Array.isArray(r))return h(e,[r]),void f.push(e);var n=r.slice(0,r.length-1),i=n.length;if(0===i)return h(e,r),void f.push(e);l[e]=i,n.forEach(o=>{if(!t[o])throw new Error("async.auto task `"+e+"` has a non-existent dependency `"+o+"` in "+n.join(", "));!function(t,e){var r=a[t];r||(r=a[t]=[]);r.push(e)}(o,()=>{0===--i&&h(e,r)})})}),function(){var t,e=0;for(;f.length;)t=f.pop(),e++,y(t).forEach(t=>{0==--l[t]&&f.push(t)});if(e!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p(),r[M]}var F=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,D=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,B=/,/,q=/(=.+)?(\s*)$/,N=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function V(t,e){var r={};return Object.keys(t).forEach(e=>{var n,i=t[e],o=p(i),u=!o&&1===i.length||o&&0===i.length;if(Array.isArray(i))n=[...i],i=n.pop(),r[e]=n.concat(n.length>0?s:i);else if(u)r[e]=i;else{if(n=function(t){const e=t.toString().replace(N,"");let r=e.match(F);if(r||(r=e.match(D)),!r)throw new Error("could not parse args in autoInject\nSource:\n"+e);let[,n]=r;return n.replace(/\s/g,"").split(B).map(t=>t.replace(q,"").trim())}(i),0===i.length&&!o&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");o||n.pop(),r[e]=n.concat(s)}function s(t,e){var r=n.map(e=>t[e]);r.push(e),d(i)(...r)}}),U(r,e)}class H{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1}insertBefore(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):z(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):z(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var e=this.head;e;){var{next:r}=e;t(e)&&this.removeLink(e),e=r}return this}}function z(t,e){t.length=1,t.head=t.tail=e}function Q(t,e,r){if(null==e)e=1;else if(0===e)throw new RangeError("Concurrency must not be zero");var n=d(t),i=0,o=[];const u={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function s(t,e){return t?e?void(u[t]=u[t].filter(t=>t!==e)):u[t]=[]:Object.keys(u).forEach(t=>u[t]=[])}function a(t,...e){u[t].forEach(t=>t(...e))}var f=!1;function l(t,e,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");var i,o;function u(t,...e){return t?r?o(t):i():e.length<=1?i(e[0]):void i(e)}m.started=!0;var s={data:t,callback:r?u:n||u};if(e?m._tasks.unshift(s):m._tasks.push(s),f||(f=!0,c(()=>{f=!1,m.process()})),r||!n)return new Promise((t,e)=>{i=t,o=e})}function h(t){return function(e,...r){i-=1;for(var n=0,u=t.length;n<u;n++){var s=t[n],c=o.indexOf(s);0===c?o.shift():c>0&&o.splice(c,1),s.callback(e,...r),null!=e&&a("error",e,s.data)}i<=m.concurrency-m.buffer&&a("unsaturated"),m.idle()&&a("drain"),m.process()}}function p(t){return!(0!==t.length||!m.idle())&&(c(()=>a("drain")),!0)}const y=t=>e=>{if(!e)return new Promise((e,r)=>{!function(t,e){const r=(...n)=>{s(t,r),e(...n)};u[t].push(r)}(t,(t,n)=>{if(t)return r(t);e(n)})});s(t),function(t,e){u[t].push(e)}(t,e)};var v=!1,m={_tasks:new H,*[Symbol.iterator](){yield*m._tasks[Symbol.iterator]()},concurrency:e,payload:r,buffer:e/4,started:!1,paused:!1,push(t,e){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!1,!1,e))}return l(t,!1,!1,e)},pushAsync(t,e){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!1,!0,e))}return l(t,!1,!0,e)},kill(){s(),m._tasks.empty()},unshift(t,e){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!0,!1,e))}return l(t,!0,!1,e)},unshiftAsync(t,e){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!0,!0,e))}return l(t,!0,!0,e)},remove(t){m._tasks.remove(t)},process(){if(!v){for(v=!0;!m.paused&&i<m.concurrency&&m._tasks.length;){var t=[],e=[],r=m._tasks.length;m.payload&&(r=Math.min(r,m.payload));for(var u=0;u<r;u++){var s=m._tasks.shift();t.push(s),o.push(s),e.push(s.data)}i+=1,0===m._tasks.length&&a("empty"),i===m.concurrency&&a("saturated");var c=S(h(t));n(e,c)}v=!1}},length:()=>m._tasks.length,running:()=>i,workersList:()=>o,idle:()=>m._tasks.length+i===0,pause(){m.paused=!0},resume(){!1!==m.paused&&(m.paused=!1,c(m.process))}};return Object.defineProperties(m,{saturated:{writable:!1,value:y("saturated")},unsaturated:{writable:!1,value:y("unsaturated")},empty:{writable:!1,value:y("empty")},drain:{writable:!1,value:y("drain")},error:{writable:!1,value:y("error")}}),m}function W(t,e){return Q(t,1,e)}function $(t,e,r){return Q(t,e,r)}var G=y((function(t,e,r,n){n=b(n);var i=d(r);return P(t,(t,r,n)=>{i(e,t,(t,r)=>{e=r,n(t)})},t=>n(t,e))}),4);function J(...t){var e=t.map(d);return function(...t){var r=this,n=t[t.length-1];return"function"==typeof n?t.pop():n=I(),G(e,t,(t,e,n)=>{e.apply(r,t.concat((t,...e)=>{n(t,e)}))},(t,e)=>n(t,...e)),n[M]}}function K(...t){return J(...t.reverse())}var X=y((function(t,e,r,n){return m(E(e),t,r,n)}),4);var Y=y((function(t,e,r,n){var i=d(r);return X(t,e,(t,e)=>{i(t,(t,...r)=>t?e(t):e(t,r))},(t,e)=>{for(var r=[],i=0;i<e.length;i++)e[i]&&(r=r.concat(...e[i]));return n(t,r)})}),4);var Z=y((function(t,e,r){return Y(t,1/0,e,r)}),3);var tt=y((function(t,e,r){return Y(t,1,e,r)}),3);function et(...t){return function(...e){return e.pop()(null,...t)}}function rt(t,e){return(r,n,i,o)=>{var u,s=!1;const a=d(i);r(n,(r,n,i)=>{a(r,(n,o)=>n||!1===n?i(n):t(o)&&!u?(s=!0,u=e(!0,r),i(null,w)):void i())},t=>{if(t)return o(t);o(null,s?u:e(!1))})}}var nt=y((function(t,e,r){return rt(t=>t,(t,e)=>e)(A,t,e,r)}),3);var it=y((function(t,e,r,n){return rt(t=>t,(t,e)=>e)(E(e),t,r,n)}),4);var ot=y((function(t,e,r){return rt(t=>t,(t,e)=>e)(E(1),t,e,r)}),3);function ut(t){return(e,...r)=>d(e)(...r,(e,...r)=>{"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&r.forEach(e=>console[t](e)))})}var st=ut("dir");var at=y((function(t,e,r){r=S(r);var n,i=d(t),o=d(e);function u(t,...e){if(t)return r(t);!1!==t&&(n=e,o(...e,s))}function s(t,e){return t?r(t):!1!==t?e?void i(u):r(null,...n):void 0}return s(null,!0)}),3);function ct(t,e,r){const n=d(e);return at(t,(...t)=>{const e=t.pop();n(...t,(t,r)=>e(t,!r))},r)}function ft(t){return(e,r,n)=>t(e,n)}var lt=y((function(t,e,r){return A(t,ft(d(e)),r)}),3);var ht=y((function(t,e,r,n){return E(e)(t,ft(d(r)),n)}),4);var pt=y((function(t,e,r){return ht(t,1,e,r)}),3);function dt(t){return p(t)?t:function(...e){var r=e.pop(),n=!0;e.push((...t)=>{n?c(()=>r(...t)):r(...t)}),t.apply(this,e),n=!1}}var yt=y((function(t,e,r){return rt(t=>!t,t=>!t)(A,t,e,r)}),3);var vt=y((function(t,e,r,n){return rt(t=>!t,t=>!t)(E(e),t,r,n)}),4);var mt=y((function(t,e,r){return rt(t=>!t,t=>!t)(P,t,e,r)}),3);function gt(t,e,r,n){var i=new Array(e.length);t(e,(t,e,n)=>{r(t,(t,r)=>{i[e]=!!r,n(t)})},t=>{if(t)return n(t);for(var r=[],o=0;o<e.length;o++)i[o]&&r.push(e[o]);n(null,r)})}function wt(t,e,r,n){var i=[];t(e,(t,e,n)=>{r(t,(r,o)=>{if(r)return n(r);o&&i.push({index:e,value:t}),n(r)})},t=>{if(t)return n(t);n(null,i.sort((t,e)=>t.index-e.index).map(t=>t.value))})}function bt(t,e,r,n){return(g(e)?gt:wt)(t,e,d(r),n)}var _t=y((function(t,e,r){return bt(A,t,e,r)}),3);var St=y((function(t,e,r,n){return bt(E(e),t,r,n)}),4);var jt=y((function(t,e,r){return bt(P,t,e,r)}),3);var Et=y((function(t,e){var r=S(e),n=d(dt(t));return function t(e){if(e)return r(e);!1!==e&&n(t)}()}),2);var kt=y((function(t,e,r,n){var i=d(r);return X(t,e,(t,e)=>{i(t,(r,n)=>r?e(r):e(r,{key:n,val:t}))},(t,e)=>{for(var r={},{hasOwnProperty:i}=Object.prototype,o=0;o<e.length;o++)if(e[o]){var{key:u}=e[o],{val:s}=e[o];i.call(r,u)?r[u].push(s):r[u]=[s]}return n(t,r)})}),4);function Rt(t,e,r){return kt(t,1/0,e,r)}function Ot(t,e,r){return kt(t,1,e,r)}var At=ut("log");var xt=y((function(t,e,r,n){n=b(n);var i={},o=d(r);return E(e)(t,(t,e,r)=>{o(t,e,(t,n)=>{if(t)return r(t);i[e]=n,r(t)})},t=>n(t,i))}),4);function Lt(t,e,r){return xt(t,1/0,e,r)}function Pt(t,e,r){return xt(t,1,e,r)}function Ct(t,e=(t=>t)){var r=Object.create(null),n=Object.create(null),o=d(t),u=i((t,i)=>{var u=e(...t);u in r?c(()=>i(null,...r[u])):u in n?n[u].push(i):(n[u]=[i],o(...t,(t,...e)=>{t||(r[u]=e);var i=n[u];delete n[u];for(var o=0,s=i.length;o<s;o++)i[o](t,...e)}))});return u.memo=r,u.unmemoized=t,u}var Tt=a(u?process.nextTick:o?setImmediate:s),Mt=y((t,e,r)=>{var n=g(e)?[]:{};t(e,(t,e,r)=>{d(t)((t,...i)=>{i.length<2&&([i]=i),n[e]=i,r(t)})},t=>r(t,n))},3);function It(t,e){return Mt(A,t,e)}function Ut(t,e,r){return Mt(E(e),t,r)}function Ft(t,e){var r=d(t);return Q((t,e)=>{r(t[0],e)},e,1)}class Dt{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(t){let e;for(;t>0&&qt(this.heap[t],this.heap[e=Bt(t)]);){let r=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=r,t=e}}percDown(t){let e;for(;(e=1+(t<<1))<this.heap.length&&(e+1<this.heap.length&&qt(this.heap[e+1],this.heap[e])&&(e+=1),!qt(this.heap[t],this.heap[e]));){let r=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=r,t=e}}push(t){t.pushCount=++this.pushCount,this.heap.push(t),this.percUp(this.heap.length-1)}unshift(t){return this.heap.push(t)}shift(){let[t]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),t}toArray(){return[...this]}*[Symbol.iterator](){for(let t=0;t<this.heap.length;t++)yield this.heap[t].data}remove(t){let e=0;for(let r=0;r<this.heap.length;r++)t(this.heap[r])||(this.heap[e]=this.heap[r],e++);this.heap.splice(e);for(let t=Bt(this.heap.length-1);t>=0;t--)this.percDown(t);return this}}function Bt(t){return(t+1>>1)-1}function qt(t,e){return t.priority!==e.priority?t.priority<e.priority:t.pushCount<e.pushCount}function Nt(t,e){var r=Ft(t,e);return r._tasks=new Dt,r.push=function(t,e=0,n=(()=>{})){if("function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,Array.isArray(t)||(t=[t]),0===t.length&&r.idle())return c(()=>r.drain());for(var i=0,o=t.length;i<o;i++){var u={data:t[i],priority:e,callback:n};r._tasks.push(u)}c(r.process)},delete r.unshift,r}var Vt=y((function(t,e){if(e=b(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var r=0,n=t.length;r<n;r++)d(t[r])(e)}),2);function Ht(t,e,r,n){var i=[...t].reverse();return G(i,e,r,n)}function zt(t){var e=d(t);return i((function(t,r){return t.push((t,...e)=>{let n={};if(t&&(n.error=t),e.length>0){var i=e;e.length<=1&&([i]=e),n.value=i}r(null,n)}),e.apply(this,t)}))}function Qt(t){var e;return Array.isArray(t)?e=t.map(zt):(e={},Object.keys(t).forEach(r=>{e[r]=zt.call(this,t[r])})),e}function Wt(t,e,r,n){const i=d(r);return bt(t,e,(t,e)=>{i(t,(t,r)=>{e(t,!r)})},n)}var $t=y((function(t,e,r){return Wt(A,t,e,r)}),3);var Gt=y((function(t,e,r,n){return Wt(E(e),t,r,n)}),4);var Jt=y((function(t,e,r){return Wt(P,t,e,r)}),3);function Kt(t){return function(){return t}}const Xt=5,Yt=0;function Zt(t,e,r){var n={times:Xt,intervalFunc:Kt(Yt)};if(arguments.length<3&&"function"==typeof t?(r=e||I(),e=t):(!function(t,e){if("object"==typeof e)t.times=+e.times||Xt,t.intervalFunc="function"==typeof e.interval?e.interval:Kt(+e.interval||Yt),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||Xt}}(n,t),r=r||I()),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var i=d(e),o=1;return function t(){i((e,...i)=>{!1!==e&&(e&&o++<n.times&&("function"!=typeof n.errorFilter||n.errorFilter(e))?setTimeout(t,n.intervalFunc(o-1)):r(e,...i))})}(),r[M]}function te(t,e){e||(e=t,t=null);let r=t&&t.arity||e.length;p(e)&&(r+=1);var n=d(e);return i((e,i)=>{function o(t){n(...e,t)}return(e.length<r-1||null==i)&&(e.push(i),i=I()),t?Zt(t,o,i):Zt(o,i),i[M]})}function ee(t,e){return Mt(P,t,e)}var re=y((function(t,e,r){return rt(Boolean,t=>t)(A,t,e,r)}),3);var ne=y((function(t,e,r,n){return rt(Boolean,t=>t)(E(e),t,r,n)}),4);var ie=y((function(t,e,r){return rt(Boolean,t=>t)(P,t,e,r)}),3);var oe=y((function(t,e,r){var n=d(e);return x(t,(t,e)=>{n(t,(r,n)=>{if(r)return e(r);e(r,{value:t,criteria:n})})},(t,e)=>{if(t)return r(t);r(null,e.sort(i).map(t=>t.value))});function i(t,e){var r=t.criteria,n=e.criteria;return r<n?-1:r>n?1:0}}),3);function ue(t,e,r){var n=d(t);return i((i,o)=>{var u,s=!1;i.push((...t)=>{s||(o(...t),clearTimeout(u))}),u=setTimeout((function(){var e=t.name||"anonymous",n=new Error('Callback function "'+e+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),s=!0,o(n)}),e),n(...i)})}function se(t,e,r,n){var i=d(r);return X(function(t){for(var e=Array(t);t--;)e[t]=t;return e}(t),e,i,n)}function ae(t,e,r){return se(t,1/0,e,r)}function ce(t,e,r){return se(t,1,e,r)}function fe(t,e,r,n){arguments.length<=3&&"function"==typeof e&&(n=r,r=e,e=Array.isArray(t)?[]:{}),n=b(n||I());var i=d(r);return A(t,(t,r,n)=>{i(e,t,r,n)},t=>n(t,e)),n[M]}var le=y((function(t,e){var r,n=null;return pt(t,(t,e)=>{d(t)((t,...i)=>{if(!1===t)return e(t);i.length<2?[r]=i:r=i,n=t,e(t?null:{})})},()=>e(n,r))}));function he(t){return(...e)=>(t.unmemoized||t)(...e)}var pe=y((function(t,e,r){r=S(r);var n=d(e),i=d(t),o=[];function u(t,...e){if(t)return r(t);o=e,!1!==t&&i(s)}function s(t,e){return t?r(t):!1!==t?e?void n(u):r(null,...o):void 0}return i(s)}),3);function de(t,e,r){const n=d(t);return pe(t=>n((e,r)=>t(e,!r)),e,r)}var ye=y((function(t,e){if(e=b(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var r=0;function n(e){d(t[r++])(...e,S(i))}function i(i,...o){if(!1!==i)return i||r===t.length?e(i,...o):void n(o)}n([])})),ve={apply:n,applyEach:L,applyEachSeries:T,asyncify:f,auto:U,autoInject:V,cargo:W,cargoQueue:$,compose:K,concat:Z,concatLimit:Y,concatSeries:tt,constant:et,detect:nt,detectLimit:it,detectSeries:ot,dir:st,doUntil:ct,doWhilst:at,each:lt,eachLimit:ht,eachOf:A,eachOfLimit:k,eachOfSeries:P,eachSeries:pt,ensureAsync:dt,every:yt,everyLimit:vt,everySeries:mt,filter:_t,filterLimit:St,filterSeries:jt,forever:Et,groupBy:Rt,groupByLimit:kt,groupBySeries:Ot,log:At,map:x,mapLimit:X,mapSeries:C,mapValues:Lt,mapValuesLimit:xt,mapValuesSeries:Pt,memoize:Ct,nextTick:Tt,parallel:It,parallelLimit:Ut,priorityQueue:Nt,queue:Ft,race:Vt,reduce:G,reduceRight:Ht,reflect:zt,reflectAll:Qt,reject:$t,rejectLimit:Gt,rejectSeries:Jt,retry:Zt,retryable:te,seq:J,series:ee,setImmediate:c,some:re,someLimit:ne,someSeries:ie,sortBy:oe,timeout:ue,times:ae,timesLimit:se,timesSeries:ce,transform:fe,tryEach:le,unmemoize:he,until:de,waterfall:ye,whilst:pe,all:yt,allLimit:vt,allSeries:mt,any:re,anyLimit:ne,anySeries:ie,find:nt,findLimit:it,findSeries:ot,flatMap:Z,flatMapLimit:Y,flatMapSeries:tt,forEach:lt,forEachSeries:pt,forEachLimit:ht,forEachOf:A,forEachOfSeries:P,forEachOfLimit:k,inject:G,foldl:G,foldr:Ht,select:_t,selectLimit:St,selectSeries:jt,wrapSync:f,during:pe,doDuring:at};e.default=ve},function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"HTTPError",(function(){return d})),r.d(e,"TimeoutError",(function(){return y}));
/*! MIT License © Sindre Sorhus */
const n={};{const e=e=>{let r;if("undefined"!=typeof self&&self&&e in self&&(r=self),"undefined"!=typeof window&&window&&e in window&&(r=window),void 0!==t&&t&&e in t&&(r=t),"undefined"!=typeof globalThis&&globalThis&&(r=globalThis),void 0===r)return;const n=r[e];return"function"==typeof n?n.bind(r):n},r=["document","Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"],i={};for(const t of r)i[t]={get:()=>e(t)};Object.defineProperties(n,i)}const i=t=>null!==t&&"object"==typeof t,o="function"==typeof n.AbortController,u="function"==typeof n.ReadableStream,s="function"==typeof n.FormData,a=(...t)=>{let e={};for(const r of t)if(Array.isArray(r))Array.isArray(e)||(e=[]),e=[...e,...r];else if(i(r))for(let[t,n]of Object.entries(r))i(n)&&Reflect.has(e,t)&&(n=a(e[t],n)),e={...e,[t]:n};return e},c=["get","post","put","patch","head","delete"],f={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},l=new Set(["get","put","head","delete","options","trace"]),h=new Set([408,413,429,500,502,503,504]),p=new Set([413,429,503]);class d extends Error{constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}}class y extends Error{constructor(){super("Request timed out"),this.name="TimeoutError"}}const v=(t,e,r)=>(r>2147483647&&e(new RangeError("The `timeout` option cannot be greater than 2147483647")),setTimeout(t,r)),m=t=>new Promise((e,r)=>v(e,r,t)),g=(t,e,r)=>new Promise((n,i)=>{const u=v(()=>{o&&r.abort(),i(new y)},i,e);t.then(n).catch(i).then(()=>{clearTimeout(u)})}),w=t=>c.includes(t)?t.toUpperCase():t,b={limit:2,methods:l,statusCodes:h,afterStatusCodes:p},_=t=>{if("number"==typeof t)return{...b,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...b,...t,methods:t.methods?new Set(t.methods):b.methods,statusCodes:t.statusCodes?new Set(t.statusCodes):b.statusCodes,afterStatusCodes:p}};class S{constructor(t,{timeout:e=1e4,hooks:r,throwHttpErrors:i=!0,searchParams:c,json:l,retry:h={},...p}){if(this._retryCount=0,this._options={method:"get",credentials:"same-origin",retry:_(h),...p},t instanceof n.Request)this._input=t,this._options={...this._options,method:p.method||t.method,headers:p.headers||t.headers,body:p.body||t.body,credentials:p.credentials||t.credentials};else{if(!(t instanceof URL||"string"==typeof t))throw new TypeError("`input` must be a string, URL, or Request");if(this._input=String(t||""),this._options.prefixUrl=String(this._options.prefixUrl||""),this._options.prefixUrl&&this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");if(this._options.prefixUrl&&!this._options.prefixUrl.endsWith("/")&&(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input,c){const t=new URL(this._input,n.document&&n.document.baseURI);if("string"==typeof c||URLSearchParams&&c instanceof URLSearchParams)t.search=c;else{if(!Object.values(c).every(t=>"number"==typeof t||"string"==typeof t))throw new Error("The `searchParams` option must be either a string, `URLSearchParams` instance or an object with string and number values");t.search=new URLSearchParams(c).toString()}this._input=t.toString()}}o&&(this.abortController=new n.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",()=>{this.abortController.abort()}),this._options.signal=this.abortController.signal),this._options.method=w(this._options.method),this._timeout=e,this._hooks=a({beforeRequest:[],beforeRetry:[],afterResponse:[]},r),this._throwHttpErrors=i;const y=new n.Headers(this._options.headers||{});if((s&&this._options.body instanceof n.FormData||this._options.body instanceof URLSearchParams)&&y.has("content-type"))throw new Error(`The \`content-type\` header cannot be used with a ${this._options.body.constructor.name} body. It will be set automatically.`);if(l){if(this._options.body)throw new Error("The `json` option cannot be used with the `body` option");y.set("content-type","application/json"),this._options.body=JSON.stringify(l)}this._options.headers=y;const v=async()=>{await m(1);let t=await this._fetch();for(const e of this._hooks.afterResponse){const r=await e(this._input,this._options,t.clone());r instanceof n.Response&&(t=r)}if(!t.ok&&this._throwHttpErrors)throw new d(t);if(this._options.onDownloadProgress){if("function"!=typeof this._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!u)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(t.clone(),this._options.onDownloadProgress)}return t},g=this._options.retry.methods.has(this._options.method.toLowerCase())?this._retry(v):v();for(const[t,e]of Object.entries(f))g[t]=async()=>(y.set("accept",e),(await g).clone()[t]());return g}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof y)){if(t instanceof d){if(!this._options.retry.statusCodes.has(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.has(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}async _retry(t){try{return await t()}catch(e){const r=this._calculateRetryDelay(e);if(0!==r&&this._retryCount>0){await m(r);for(const t of this._hooks.beforeRetry)await t(this._input,this._options,e,this._retryCount);return this._retry(t)}if(this._throwHttpErrors)throw e}}async _fetch(){for(const t of this._hooks.beforeRequest){const e=await t(this._input,this._options);if(e instanceof Response)return e}return!1===this._timeout?n.fetch(this._input,this._options):g(n.fetch(this._input,this._options),this._timeout,this.abortController)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let i=0;return new n.Response(new n.ReadableStream({start(n){const o=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),async function t(){const{done:u,value:s}=await o.read();if(u)n.close();else{if(e){i+=s.byteLength,e({percent:0===r?0:i/r,transferredBytes:i,totalBytes:r},s)}n.enqueue(s),t()}}()}}))}}const j=(...t)=>{for(const e of t)if((!i(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return a({},...t)},E=t=>{const e=(e,r)=>new S(e,j(t,r));for(const r of c)e[r]=(e,n)=>new S(e,j(t,n,{method:r}));return e.create=t=>E(j(t)),e.extend=e=>E(j(t,e)),e};e.default=E()}.call(this,r(6))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,u=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,r,u):i(e,r))||u);return o>3&&u&&Object.defineProperty(e,r,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=r(0),s=function(){function t(t,e,r){var n=this;this.repo=r,this.stream=function(){return n._getRepo().then((function(t){return t.stream()}))},this._entityRepo=t().getRepository(e)}return t.prototype._getRepo=function(){return this.repo?Promise.resolve(this.repo):Promise.reject("No Repo injected")},t.prototype.save=function(t){var e=this;return this._getRepo().then((function(r){return r.save(t).then((function(r){return e._entityRepo.save(t)}))}))},t.prototype.find=function(){var t=this;return this._getRepo().then((function(e){return e.find().then((function(e){return t._entityRepo.find()}))}))},t=n([u.autoInjectable(),u.singleton(),o(2,u.inject("IRepository")),i("design:paramtypes",[Function,Object,Object])],t)}();e.Emporium=s}])}));
//# sourceMappingURL=emporium.js.map